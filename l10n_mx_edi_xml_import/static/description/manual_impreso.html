<head>
  <style>
      .backgrounds{background-color:#fff;color:#a41d35}
  </style>
</head>
<section class="oe_container">
 <div class="oe_row oe_spaced">
  <h2 class="oe_slogan">
   MX - Suite Auditoria de CFDI's
  </h2>
  <p class="oe_mt32">
  <h3 style="text-align:center;">Auditoria Odoo vs SAT</h3>
   
  </p>
  <p>
    Este modulo contiene una gama de herramientas para poder gestionar nuestra recepcion o emision de CFDI y compararla contra los almacenados en el SAT. 
    <BR/>
      <p align="center">
      <a href="http://poncesoft.blogspot.com">
          <img src="xml-dcs.png" alt="PonceSoft"/>
      </a>
      </p>
    <BR/>
    <h3>
      Contiene las siguientes herramientas:
    </h3>
    <ul>
      <li>Auditoria XML<br/>
      <ul>
        <li>
          Compara los Estados de los documentos contenidos en el SAT y los Estados de los documentos en el Sistema Odoo.
        </li>
        <li>
          Compara los documentos de Pagos, Facturas y NC.
        </li>
      </ul>
      </li>
      <li>Generacion de Complementos CFDI mediante ZIP</li>
      <li>Generacion de Reportes CFDI mediante Archivos XML</li>
    </ul>
    <h3>
      Configuracion
    </h3>
    <p>
      Debemos Configurar la Firma Electronica FIEL dentro del Apartad de Configuracion de Contabilidad. Contabilidad --> Configuracion --> Configuracion.
      <ul>
        <li>Certificado FIEL (.cer)</li>
        <li>Llave FIEL (.key)</li>
        <li>Contrase&ntilde;a FIEL</li>
      </ul>
    </p>
    <div align="center">

                    <img src="fiel_conf.png" width="800" height="350">
        </div>
    <h3>
      Descarga XML's
    </h3>
    <p>
      Para poder descargar los XML del SAT debemos ingresar al Asistente ubicado en el menu Auditoria SAT --> Descarga XML --> Descarga Documentos Electronicos (SAT).<br/>
      Debemos ingresar los Parametros de Descarga:
      <ul>
        <li>Fecha Inicial</li>
        <li>Fecha Final</li>
        <li>Tipo de Descarga:
            <ul>
              <li>CFDI Emitidos</li>
              <li>CFDI Recibidos</li>
            </ul>
        </li>
      </ul>
      Paso final pulsar Iniciar Descarga.
    </p>
    <div align="center">

                    <img src="asistente-descarga.png" width="800" height="350">
        </div>
    <h3>
      Resultado de Petici&oacute;n de Descarga
    </h3>
    <p>
      La descarga de los comprobantes no siempre se realiza de forma inmediata, depende de la saturaci&oacute;n del servicio y obtener el paquete puede tomar desde un par de horas a 1 dia entero.<br/>
      Siempre y cuando la solicitud contenga informaci&oacute;n dentro del Periodo y las Firma Electronica sea correcta obtendremos la siguiente pantalla:
    </p>
    <div align="center">

                    <img src="pendiente-de-descarga.png" width="800" height="350">
        </div>
      
    <p>
      Despues de esperar un par de horas podremos volver a solicitar la descarga desde el Boton Descargar Zip este nos devolvera un nuevo estado de solicitud o descargara el archivo el cual observaremos en pantalla:
    </p>
    <div align="center">

                    <img src="paquete-descargado.png" width="800" height="350">
        </div>
    <p>
     Existe un tablero donde podremos controlar nuestras peticiones pendientes y el historico de descargas:
    </p>
        <div align="center">

                    <img src="tablero.png" width="800" height="350">
        </div>
    
    <h3>
      Restricciones:
    </h3>
    <p><strong>Al estar relacionado con un servicio web oficial otorgado por el SAT, contiene las siguientes restricciones:</strong></p>
    <ul>
    <li>
      Para el uso del servicio solo se podra utilizar la Firma Electronica (FIEL).
    </li>
    <li>
        Un solicitud de descarga dentro de un periodo establecido solo podra descargarse un total de 2 veces, una vez agotadas, ya no se podr&aacute; volver a descargar ese periodo.
      </li>
      <li>
        Un paquete solo puede descargarse un total de 2 veces, una vez agotadas, ya no se podr&aacute; volver a descargar.
      </li>
      <li>
        Los paquetes solo tienen un periodo de vida de 72hrs.
      </li>
    </ul>

    <h3>
      Tabla con Respuestas del Servicio:
    </h3>

<table class="table">
  <thead>
    <tr>
      <th scope="col">Evento</th>
      <th scope="col">Mensaje</th>
      <th scope="col">Observaciones</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">300</th>
      <td>Usuario No Valido</td>
      <td>Este codigo de error se regresa cuando el request posee informacion invalida, ejemplo: un RFC de receptor no valido</td>
    </tr>
    <tr>
      <th scope="row">301</th>
      <td>XML Mal Formado</td>
      <td>Este codigo de error se regresa cuando el request posee informacion invalida, ejemplo: un RFC de receptor no valido</td>
    </tr>
    <tr>
      <th scope="row">302</th>
      <td>Sello Mal Formado</td>
      <td></td>
    </tr>
    <tr>
      <th scope="row">303</th>
      <td>Sello no corresponde con Rfc Solicitante</td>
      <td></td>
    </tr>
    <tr>
      <th scope="row">304</th>
      <td>Certificado Revocado o Caduco</td>
      <td>El certificado fue revocado o bien la fecha de vigencia expiro</td>
    </tr>
    <tr>
      <th scope="row">305</th>
      <td>Certificado Invalido</td>
      <td>El certificado puede ser invalido por multiples razones como son el tipo, codificacion incorrecta, etc.</td>
    </tr>
    <tr>
      <th scope="row">5000</th>
      <td>Solicitud de descarga recibida con exito</td>
      <td></td>
    </tr>
    <tr>
      <th scope="row">5004</th>
      <td>No se encontro la informacion</td>
      <td>No se encontro la informacion del paquete solicitado</td>
    </tr>
    <tr>
      <th scope="row">5007</th>
      <td>No existe el paquete solicitado</td>
      <td>Los paquetes solo tienen un periodo de vida de 72 hrs</td>
    </tr>
    <tr>
      <th scope="row">5008</th>
      <td>Maximo de descargas permitidas</td>
      <td>Un paquete solo puede descargarse un total de 2 veces, una vez agotadas, ya no se podra volver a descargar</td>
    </tr>
    <tr>
      <th scope="row">404</th>
      <td>ErrornoControlado</td>
      <td>Error generico, en caso de presentarse realizar nuevamente la peticion y si persiste el error levantar un RMA.</td>
    </tr>
  </tbody>
</table>


<h3>
      Automaticaci&oacute;n de Descargas
    </h3>
    <p>Como ya se menciono anteriormente el servicio otorgado no es en tiempo real, puede tomar de minutos a un par de horas tener listo nuestro paquete y estas acciones de consulta se generan manualmente, se a&ntilde;adio una funcionalidad que automatiza la consulta de los paquetes, para ello activamos dentro del menu <strong> Contabilidad --> Configuracion --> Configuracion --> Configuracion Descarga Masiva SAT --> campo  Consulta Automatica.</strong></p>

    <div align="center">
                    <img src="consulta.png" width="550" height="150">
        </div>
    <p>Esta configuraci&oacute;n habilita el metodo planificado llamado Descarga de Paquetes Pendientes XML el cual podremos programar para que se ejecute la cantidad de veces y en periodos que sean necesarios.</p>
    <div align="center">
                    <img src="metodo_planificado.png" width="800" height="350">
        </div>
    <p>Si la accion planificada pudo descargar el paquete correctamente este lo podremos visualizar en el tablero en color morado y marcado como favorito.</p>
    <div align="center">
      <img src="resultado_consulta_planificada.png" width="400" height="300">
    </div>
    
    <h3>
      NOTAS:
    </h3>
    <p>Dentro de la Configuraci&oacute;n de la FIEL solo sera necesario ingresar el Archivo Cer, Key y la contrase&ntilde;a.</p>
    <p>
SE DEBE USAR LA e.FIRMA, CONOCIDA ANTERIORMENTE COMO FIEL, NO USAR EL CSD
ADEMAS SE DEBE USAR UN CERTIFICADO *REAL*, NO SE PUEDEN USAR CERTIFICADOS DE PRUEBA
    </p>
    <p>
      La Informacion mostrada dentro de los campos:
      <ul>
        <li># Facturas Cliente <ul><li>La informaci&oacute;n se muestra tomando como referencia el campo Fecha de CFDI y que no esten en borrador o canceladas.</li></ul></li>
        <li># Notas Credito<ul><li>La informaci&oacute;n se muestra tomando como referencia el campo Fecha de CFDI y que no esten en borrador o canceladas.</li></ul></li>
        <li># Facturas Proveedor<ul><li>La informaci&oacute;n se muestra tomando como referencia el campo Fecha de Factura y que no esten en borrador o canceladas.</li></ul></li>
        <li># Notas Credito<ul><li>La informaci&oacute;n se muestra tomando como referencia el campo Fecha de Factura y que no esten en borrador o canceladas.</li></ul></li>
        <li># Pagos<ul><li>La informaci&oacute;n se muestra tomando como referencia el campo Fecha Recepcion de Pago y que no esten en borrador o canceladas.</li></ul></li>
      </ul>
    </p>
    <strong>Dependencias:</strong><br/>
Ubuntu Install:<br/>
    sudo apt-get install python3-suds <br/>
    sudo apt-get install python3-cfdiclient <br/>
    pycrypto==2.6 <br/>
    pycryptodomex==3.6.4 <br/>
<br />
<hr style="display: block;margin-top: 0.5em;margin-bottom: 0.5em;margin-left: auto;margin-right: auto;border-style: inset;border-width: 1px;" />
  </p>
 </div>
</section>
<section class="oe_container">
    <div class="oe_row oe_spaced">
        <div class="oe_span6">
            <h2 class="oe_slogan">Argil Consulting</h2>
            <h3 class="oe_slogan">Reaching new levels...</h3>
            <p class="oe_mt32 text-center">Contact us via our channels</p>
            <div class="oe_spaced">
                <ul class="text-center list-inline">
                    <li>
                        <a href="https://facebook.com/argilconsulting" Target="_blank"><i class="fa fa-facebook-square fa-xs backgrounds"></i></a>
                    </li>
                    <li>
                        <a href="https://twitter.com/argilc" Target="_blank" ><i class="fa fa-twitter-square fa-xs backgrounds"></i></a>
                    </li>
                    <li>
                        <a title="Contact us" data-toggle="tooltip" data-placement="left" Target="_blank" href="http://argil.mx/index.php/contact"><i class="fa fa-envelope-square fa-xs backgrounds"></i></a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="oe_span6">
            <div class="oe_demo oe_picture oe_screenshot">
                <a href="https://www.argil.mx"  target="_blank"r>
                    <img src="logo_argil.png" width="auto" height="auto">
                </a>
            </div>
        </div>
    </div>
</section>
